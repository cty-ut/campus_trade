# 校内二手交易平台 - 产品需求文档 (PRD)

**版本:** 1.0
**日期:** 2025-11-01

---

## 1. 🎯 项目概述

### 1.1. 项目目标
本项目旨在开发一个专属于本校学生的 C2C 二手交易平台。平台通过**校内邮箱认证**机制确保用户身份的真实性，提供一个安全、便捷、高信任度的环境，用于发布、浏览、求购和赠送闲置物品。

### 1.2. 核心用户
拥有特定后缀的本校在册学生及教职工。

### 1.3. 核心特色
* **高安全性:** 强制校内邮箱注册，杜绝校外人员，建立高信任社区。
* **高便捷性:** 专注校内交易，鼓励线下自提，简化交易流程。
* **高针对性:** 包含“求购”、“免费赠送”等校园高频需求。

---

## 2. 📋 功能需求 (Functional Requirements)

### FR1: 👤 用户系统 (User Module)

| 功能点 | 需求描述 |
| :--- | :--- |
| **FR1.1: 注册** | 1. 用户必须使用**指定后缀的校内邮箱**注册。<br>2. 后端必须对邮箱后缀进行严格校验。<br>3. 用户设置昵称（唯一）和密码（需加密存储）。<br>4. (可选) 注册后需邮件验证激活。 |
| **FR1.2: 登录** | 1. 用户使用“校内邮箱 + 密码”登录。<br>2. 登录成功后，后端返回 Token (如 JWT) 用于后续身份验证。 |
| **FR1.3: 个人主页** | 1. **公开信息:** 显示用户头像、昵称、认证状态、成功交易次数。 <br>2. **Tab 列表:** 分 Tab 显示该用户“在售的”、“求购的”、“免费送的”所有帖子。<br>3. **私有信息 (仅自己可见):** “编辑资料”、“我的收藏”列表、“我的消息”入口。 |

### FR2: 📦 交易模块 (Trading Module)

| 功能点 | 需求描述 |
| :--- | :--- |
| **FR2.1: 发布商品 (卖)** | 1. 用户可发布商品进行**出售**。<br>2. 必填字段: `标题`, `描述`, `价格`, `分类` (如: 电子产品, 教科书, 日用品), `新旧程度`。<br>3. 必须支持上传 1-9 张商品图片。 |
| **FR2.2: 发布求购 (买)** | 1. 用户可发布“**求购**”帖子。<br>2. 必填字段: `求购标题`, `详细描述`, `期望价格范围`。<br>3. 其他用户看到后可通过私信联系。 |
| **FR2.3: 免费赠送** | 1. 发布商品时，提供“**免费赠送**”选项。<br>2. 勾选后，`价格` 字段自动锁定为 0。<br>3. 平台首页应有“免费专区”入口。 |

### FR3: 🔎 浏览与互动 (Interaction Module)

| 功能点 | 需求描述 |
| :--- | :--- |
| **FR3.1: 浏览与搜索** | 1. **首页:** 默认按 `最新发布` 瀑布流展示所有商品。<br>2. **专区:** 首页有“免费专区”和“求购专区”的明显入口。<br>3. **搜索:** 支持按 `关键词` 搜索商品标题和描述。<br>4. **筛选:** 支持按 `分类` 筛选商品。<br>5. **排序:** 支持按 `最新发布`, `价格 (高到低)`, `价格 (低到高)` 排序。 |
| **FR3.2: 商品详情页** | 1. 展示商品所有信息 (图片轮播, 标题, 价格, 描述等)。<br>2. 展示卖家信息 (头像, 昵称, 成功交易次数)。<br>3. 提供核心操作按钮: **[立即联系]**, **[收藏]**, **[举报]**。 |
| **FR3.3: 用户私信 (IM)** | 1. **核心功能**。促成交易的关键。<br>2. 用户可在商品/求购详情页或对方个人主页发起 1v1 聊天。<br>3. 应有独立的“消息”页面，汇总所有聊天列表。<br>4. (MVP) 支持纯文本实时聊天。 |
| **FR3.4: 收藏** | 1. 用户可对 `商品` 进行收藏/取消收藏。<br>2. `个人主页` -> `我的收藏` 中可查看所有收藏的商品列表。 |

### FR4: 🛡️ 信任与安全 (Trust & Safety)

| 功能点 | 需求描述 |
| :--- | :--- |
| **FR4.1: 评价系统** | 1. **简化设计**，不采用星级，只记录**成功交易**。<br>2. 商品被卖家标记为“已售出”后，买卖双方可进行“确认交易成功”的操作。<br>3. 双方均确认后，各自的 `个人主页` -> `成功交易次数` +1。 |
| **FR4.2: 举报** | 1. 用户可对 `商品`, `求购帖`, `用户` 进行举报。<br>2. 举报时需选择理由 (如: 违禁品, 诈骗, 广告等)。<br>3. 后端记录举报信息，供管理员处理。 |

---

## 3. ⚙️ 非功能性需求 (Non-Functional Requirements)

| 类别 | 需求描述 |
| :--- | :--- |
| **NFR1: 安全性** | 1. **密码安全:** 用户密码必须 Hashing + Salting (加盐) 后存储。<br>2. **API 安全:** 所有需登录的 API 必须通过 Token 认证。<br>3. **防注入:** 后端必须对所有用户输入进行校验和清理 (防 SQL 注入, XSS)。 |
| **NFR2: 性能** | 1. **图片优化:** 用户上传的图片应在后端进行压缩和裁剪，生成缩略图。<br>2. **懒加载:** 列表页 (首页, 收藏页) 的图片应使用懒加载。<br>3. **数据库索引:** 对高频查询字段 (如 `product.owner_id`, `product.category_id`) 建立索引。 |
| **NFR3: 用户体验** | 1. **移动优先:** 界面设计必须首先适配手机浏览器 (响应式设计)。<br>2. **状态清晰:** 明确展示加载中、加载失败、空数据等各种界面状态。 |

---

## 4. ❌ V1.0 暂不实现 (Out of Scope)

* 在线支付功能 (鼓励线下交易，规避金融风险)。
* 物流系统 (同上)。
* 商品拍卖/竞价功能。
* 复杂的商品 SKU (如S/M/L码) 管理。
* 广告系统。